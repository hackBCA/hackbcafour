{% extends "user.base.html" %}

{% set nav_bar = [
  ("/#home", "Home", False)
] -%}

{% block content %}
{% with nav_bar = nav_bar %}
  {% include "navbar.html" %}
{% endwith %}

  <div class="full-page-container">
   <div class="page-section" id="register">
      <div class="container">
         <div class="cover">
            <div class="content">
               <h1 class="title">Hacker Registration</h1>
                <form method="POST" onSubmit="check_phone()">
                  {% for field in form %}
                    {% if field.type == "BooleanField" %}
                      <h2>{{ field.description }}</h2>
                    {% endif%}

                    {{ render_field(field) }}    
                  {% endfor %}
                  
                  <div class="buttons">
                    <button class="button" type="submit">Register!</button>
                  </div>
                </form>
            </div>
         </div>
      </div>
   </div>
</div>
{% endblock %}
  
{% block scripts %}
<script type="text/javascript">
    
  var check_phone = function(){
      var phone_number = document.getElementById("phone");
      var numbers = phone_number.value.replace(/\D/g, '');
      if(numbers.length == 10 || numbers.length == 11 || numbers.length == 12){
          var finalstr = "";
          if(numbers.length == 10){
              finalstr += numbers.substr(0,3) + "-" + numbers.substr(3,3) + "-" + numbers.substr(6,4);
          } 
          else if(numbers.length == 11){
              finalstr += "+" + numbers.substr(0,1) + "-" + numbers.substr(1,3) + "-" + numbers.substr(4,3) + "-" + numbers.substr(7,4);
           }
           else if(numbers.length == 12){
              finalstr += "+" + numbers.substr(0,2) + "-" + numbers.substr(2,3) + "-" + numbers.substr(5,3) + "-" + numbers.substr(8,4);
           }
           document.getElementById("phone").value = finalstr;
      }
  }
</script>
     
{% endblock %}